
### Отчет по лабораторной работе
**Тема:** Разработка системы управления библиотекой с использованием Spring Boot и Hibernate

#### Цель работы
Создать веб-приложение для управления библиотекой, включающее сущности `Author`, `Book`, `Category`, `Library` и `Publisher`, используя Spring Boot и Hibernate с маппингом через XML (без аннотаций JPA). Реализовать базовые CRUD-операции и устранить проблемы, связанные с конфигурацией и загрузкой данных.

#### Выполненные шаги
1. **Проектирование сущностей**:
    - Определены классы `Author`, `Book`, `Category`, `Library`, `Publisher` как POJO с полями и связями (один-ко-многим, многие-ко-многим).
    - Аннотации JPA удалены, маппинг перенесен в XML-файлы (`.hbm.xml`).

2. **Настройка Hibernate**:
    - Создан класс `HibernateConfig` для конфигурации `SessionFactory` с использованием XML-маппингов.
    - Подключен `DataSource` через `spring-boot-starter-jdbc` с настройками в `application.properties`.
    - Отключена автоконфигурация JPA через свойство `spring.autoconfigure.exclude`.

3. **Реализация DAO**:
    - Созданы DAO-классы (`AuthorDao`, `BookDao`, `CategoryDao`, `LibraryDao`, `PublisherDao`) для выполнения CRUD-операций с использованием `SessionFactory`.
    - Добавлена обработка коллекций (например, `categories` в `Book`) с использованием `Hibernate.initialize()` для предотвращения `LazyInitializationException`.

4. **Создание сервисов**:
    - Реализованы сервисы (`AuthorService`, `BookService`, `PublisherService`) для бизнес-логики, включая преобразование сущностей в DTO.
    - Адаптированы методы для работы с `Set` вместо `List` в коллекциях.

5. **Устранение ошибок**:
    - Удалена зависимость `spring-boot-devtools` для предотвращения конфликтов класслоадеров.
    - Исправлены ошибки `LazyInitializationException` путем инициализации коллекций в DAO.

6. **Тестирование**:
    - Проверен запрос `GET /books` для получения списка книг с корректным отображением связанных данных (автор, издатель, категории).

#### Использованные технологии
- **Spring Boot**: Основной фреймворк для создания приложения.
- **Hibernate**: ORM для работы с базой данных (XML-маппинг).
- **H2 Database**: Встроенная база данных для тестирования.
- **Maven**: Система сборки проекта.

#### Результаты
- Разработано приложение, позволяющее управлять данными библиотеки (авторы, книги, категории, библиотеки, издательства).
- Реализованы CRUD-операции через DAO и сервисы.
- Успешно устранены ошибки конфигурации (`entityManagerFactory`, `DataSource`) и обработки данных (`ClassCastException`, `LazyInitializationException`).
- Приложение запускается и отвечает на запрос `GET /books`, возвращая список книг в формате DTO с учетом связанных сущностей.

#### Выводы
Работа показала, как настроить Spring Boot с Hibernate без использования аннотаций JPA, применяя XML-маппинг. Были изучены особенности работы с ленивой загрузкой коллекций и устранения конфликтов в Spring Boot. Полученные навыки могут быть применены для разработки более сложных систем управления данными.
